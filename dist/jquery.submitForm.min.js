!function(t){var e=["INPUT","SELECT","TEXTAREA"],n={processing:"processing",error:"error",success:"success"},a=[37,39,8,46,13,10,36,35,9],i=[],s={required:function(e){var n="radio"===e.type||"checkbox"===e.type?e.checked:t(e).val().trim();return n||t(e).addClass("invalid"),!!n},phone:function(e){var n=t(e).val(),a=!0;return(!/^[0-9()\-+\s]+$/.test(n)||n.length<6)&&(t(e).addClass("invalid"),a=!1),a},email:function(e){var n=t(e).val(),a=!0;return n&&!/^[а-яА-Яa-zA-Z0-9.!#$%&’*+\/=?^_`{|}~-]+@[а-яА-Яa-zA-Z0-9-]+(?:\.[а-яА-Яa-zA-Z0-9-]+)*$/i.test(n)&&(t(e).addClass("invalid"),a=!1),a},date:function(e){var n=t(e).val(),a=!0;if(n){var i=n.split("."),s=new Date(i[2],i[1]-1,i[0],0,0,0,0);(a=!isNaN(s.getTime())&&parseInt(i[1])===s.getMonth()+1)||t(e).addClass("invalid")}return a},minlength:function(e){var n=t(e).attr("minlength"),a=!0;return t(e).val().length<n&&(a=!1,t(e).addClass("invalid")),a},number:function(e){var n=t(e).val(),a=!0;return n&&!/^\d+$/.test(n)&&(t(e).addClass("invalid"),a=!1),a},name:function(e){var n=t(e).val(),a=!0;return n&&/[\d\/\|:@%&*()^~`"'+$#№]/.test(n)&&(t(e).addClass("invalid"),a=!1),a}};function o(n){return t(n.children).each(function(n,a){-1===t.inArray(a.nodeName,e)||a.disabled||i.push(a),a.childElementCount&&o(a)}),i}function r(e){var n=t(e).attr("data-validate");if(t(e).removeClass("invalid"),t(e).removeClass("valid"),n){for(var a=n.split(", "),i=0;validator=a[i];i++){var o=s[validator];if(t(e).removeClass("invalid"),valid=o(e),!valid)return t(e).focus(),t(this).addClass("invalid-"+validator),!1}if(!valid)return void 0!==this.options.invalidHandler&&this.options.invalidHandler(item),!1}return t(e).addClass("valid"),!0}function d(){var e=this;i=[],this.fields=o(this),t.each(s,function(n,a){t(e).removeClass("invalid-"+n)});for(var n=!1,a=0;a<i.length;a++){var d=this.fields[a];if(!(n=r.call(e,d)))break}return n}function l(){if(t.each(this.state,function(e,n){t(this).removeClass(n)}),d.call(this)){var e={};return t(this.fields).each(function(n,a){var i,s=a.name||a.id;"radio"!==a.type&&"checkbox"!==a.type||!a.checked||(i=t(a).val()),(/text|hidden|password|tel/.test(a.type)||"SELECT"===a.nodeName||"TEXTAREA"===a.nodeName)&&(i=t(a).val()),void 0!==i&&(e[s]?("object"!=typeof e[s]&&(e[s]=[e[s]]),e[s].push(i)):e[s]=i)}),e=this.options.prepare(e),this.options.ajax?(this.options.ajaxObject?this.options.ajaxObject.data=e:this.options.ajaxObject={url:this.options.source,type:this.options.method,data:e,beforeSend:this.options.onBeforeSend,success:this.options.onSuccess,error:this.options.onError},this.options.beforeSend(e)&&t.ajax(this.options.ajaxObject),!1):(this.options.onBeforeSend(),!0)}return!1}var c={init:function(e){return this.each(function(i,s){var d=t(s),c={ajaxObject:null,source:d.attr("action")||"/",method:d.attr("method")||"POST",ajax:!0,responseElement:t(this),onBeforeSend:function(t){d.addClass(s.state.processing)},onSuccess:function(t,e,n){d.removeClass(s.state.processing),d.addClass(s.state.success);var a=s.options.success&&s.options.success(t);(a||void 0===a)&&s.options.responseElement.html(t)},onError:function(t,e,n){d.removeClass(s.state.processing),d.addClass(s.state.error),(s.options.error?s.options.error(e,n):void 0)&&s.options.responseElement.html(n)},success:function(t){},prepare:function(t){return t},beforeSend:function(t){return!0}},u=t.extend({},c,e);s.options=u,d.submit(l),s.fields=o(s),s.state=e&&e.state?t.extend(n,e.state):n;var v=s;t.each(s.fields,function(e,n){t(n).keyup(function(e){t(n).removeClass("valid"),-1==a.indexOf(e.keyCode)&&v.options.validateOnEnter&&r.call(v,n)}),t(n).change(function(t){v.options.validateOnEnter&&r.call(v,n)})})})},loadData:function(e){this.fields=o(this),t.each(this.fields,function(n,a){e[a.name]&&t(a).val(e[a.name])})},validate:function(){d.call(this)}};t.fn.submitForm=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error('Method "'+e+'" not found!'):c.init.apply(this,arguments)}}($);