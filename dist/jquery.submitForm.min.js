!function(e){function t(n){return e(n.children).each(function(e,n){-1===jQuery.inArray(n.nodeName,s)||n.disabled||l.push(n),n.childElementCount&&t(n)}),l}function n(t){var n=e(t).attr("data-validate");if(e(t).removeClass("invalid"),e(t).removeClass("valid"),n){for(var i=n.split(", "),a=0;validator=i[a];a++){var s=d[validator];if(e(t).removeClass("invalid"),valid=s(t),!valid)return e(t).focus(),e(this).addClass("invalid-"+validator),!1}if(!valid)return void 0!==this.options.invalidHandler&&this.options.invalidHandler(item),!1}return e(t).addClass("valid"),!0}function i(){var i=this;l=[],this.fields=t(this),e.each(d,function(t,n){e(i).removeClass("invalid-"+t)});for(var a=!1,s=0;s<l.length;s++){var o=this.fields[s];if(!(a=n.call(i,o)))break}return a}function a(){if(e.each(o,function(t,n){e(this).removeClass(n)}),i.call(this)){var t={};return e(this.fields).each(function(n,i){var a,s=i.name||i.id;"radio"!==i.type&&"checkbox"!==i.type||!i.checked||(a=e(i).val()),(/text|hidden|password|tel/.test(i.type)||"SELECT"===i.nodeName||"TEXTAREA"===i.nodeName)&&(a=e(i).val()),void 0!==a&&(t[s]?("object"!=typeof t[s]&&(t[s]=[t[s]]),t[s].push(a)):t[s]=a)}),t=this.options.prepare(t),this.options.ajax?(this.options.ajaxObject?this.options.ajaxObject.data=t:this.options.ajaxObject={url:this.options.source,type:this.options.method,data:t,beforeSend:this.options.onBeforeSend,success:this.options.onSuccess,error:this.options.onError},this.options.beforeSend(t)&&e.ajax(this.options.ajaxObject),!1):(this.options.onBeforeSend(),!0)}return!1}var s=["INPUT","SELECT","TEXTAREA"],o={processing:"processing",error:"error",success:"success"},r=[37,39,8,46,13,10,36,35,9],l=[],d={required:function(t){var n="radio"===t.type||"checkbox"===t.type?t.checked:e(t).val().trim();return n||e(t).addClass("invalid"),!!n},phone:function(t){var n=e(t).val(),i=!0;return(!/^[0-9()\-+\s]+$/.test(n)||n.length<6)&&(e(t).addClass("invalid"),i=!1),i},email:function(t){var n=e(t).val(),i=!0;return n&&!/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(n)&&(e(t).addClass("invalid"),i=!1),i},date:function(t){var n=e(t).val(),i=!0;if(n){var a=n.split("."),s=new Date(a[2],a[1]-1,a[0],0,0,0,0);(i=!isNaN(s.getTime())&&parseInt(a[1])===s.getMonth()+1)||e(t).addClass("invalid")}return i},minlength:function(t){var n=e(t).attr("minlength"),i=!0;return e(t).val().length<n&&(i=!1,e(t).addClass("invalid")),i}},c={init:function(i){return this.each(function(s,l){var d=e(l),c=(d.data("submitForm"),{ajaxObject:null,source:d.attr("action")||"/",method:d.attr("method")||"POST",ajax:!0,responseElement:e(this),onBeforeSend:function(e){d.addClass(o.processing)},onSuccess:function(e,t,n){d.removeClass(o.processing),d.addClass(o.success);var i=l.options.success&&l.options.success(e);(i||void 0===i)&&l.options.responseElement.html(e)},onError:function(e,t,n){d.removeClass(o.processing),d.addClass(o.error),(l.options.error?l.options.error(t,n):void 0)&&l.options.responseElement.html(n)},success:function(e){},prepare:function(e){return e},beforeSend:function(e){return!0}});i&&i.state&&(o=e.extend(o,i.state));var u=e.extend({},c,i);l.options=u,d.submit(a),l.fields=t(l);var v=l;e.each(l.fields,function(t,i){e(i).keyup(function(t){e(i).removeClass("valid"),-1==r.indexOf(t.keyCode)&&v.options.validateOnEnter&&n.call(v,i)}),e(i).change(function(e){v.options.validateOnEnter&&n.call(v,i)})})})},loadData:function(n){this.fields=t(this),e.each(this.fields,function(t,i){n[i.name]&&e(i).val(n[i.name])})},validate:function(){i.call(this)}};e.fn.submitForm=function(t){return c[t]?c[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" not found!'):c.init.apply(this,arguments)}}(jQuery);