!function(t){var e=["INPUT","SELECT","TEXTAREA"],n={processing:"processing",error:"error",success:"success"},s=[37,39,8,46,13,10,36,35,9],i=[],o={required:function(e){return!!("radio"===e.type||"checkbox"===e.type?e.checked:t(e).val().trim())},phone:function(e){var n=t(e).val(),s=!0;return(!/^[0-9()\-+\s]+$/.test(n)||n.length<6)&&(s=!1),s},email:function(e){var n=t(e).val(),s=!0;return n&&!/^[а-яА-Яa-zA-Z0-9.!#$%&’*+\/=?^_`{|}~-]+@[а-яА-Яa-zA-Z0-9-]+(?:\.[а-яА-Яa-zA-Z0-9-]+)*$/i.test(n)&&(s=!1),s},date:function(e){var n=t(e).val(),s=!0;if(n){var i=n.split("."),o=new Date(i[2],i[1]-1,i[0],0,0,0,0);s=!isNaN(o.getTime())&&parseInt(i[1])===o.getMonth()+1}return s},minlength:function(e){var n=t(e).attr("minlength"),s=!0;return t(e).val().length<n&&(s=!1),s},number:function(e){var n=t(e).val(),s=!0;return n&&!/^\d+$/.test(n)&&(s=!1),s},name:function(e){var n=t(e).val(),s=!0;return n&&/[\d\/\|:@%&*()^~`"'+$#№]/.test(n)&&(s=!1),s}};function a(n){return t(n.children).each(function(n,s){-1===t.inArray(s.nodeName,e)||s.disabled||i.push(s),s.childElementCount&&a(s)}),i}function r(e){var n=t(e).attr("data-validate");if(t(e).removeClass("invalid valid"),n)for(var s=n.split(", "),i=0;validator=s[i];i++){var a=(0,o[validator])(e);if(t(e).removeClass("invalid").removeClass(function(t,e){return(e.match(/\binvalid_\S+/g)||[]).join(" ")}),!a)return t(e).focus(),t(e).addClass("invalid").addClass("invalid_"+validator),!1}return t(e).addClass("valid"),!0}function c(){i=[],this.fields=a(this),t(this).removeClass("invalid");for(var e=!1,n=null,s=0;s<i.length&&(e=r(n=this.fields[s]));s++);return e||(t(this).addClass("invalid"),void 0===this.options.invalidHandler)?e:(this.options.invalidHandler(n),!1)}function l(){if(t.each(this.state,function(e,n){t(this).removeClass(n)}),c.call(this)){var e={};return t(this.fields).each(function(n,s){var i,o=s.name||s.id;"radio"!==s.type&&"checkbox"!==s.type||!s.checked||(i=t(s).val()),(/text|hidden|password|tel/.test(s.type)||"SELECT"===s.nodeName||"TEXTAREA"===s.nodeName)&&(i=t(s).val()),void 0!==i&&(e[o]?("object"!=typeof e[o]&&(e[o]=[e[o]]),e[o].push(i)):e[o]=i)}),e=this.options.prepare(e),this.options.ajax?(this.options.ajaxObject?this.options.ajaxObject.data=e:this.options.ajaxObject={url:this.options.source,type:this.options.method,data:e,beforeSend:this.options.onBeforeSend,success:this.options.onSuccess,error:this.options.onError},this.options.beforeSend(e,this.options.ajaxObject)&&t.ajax(this.options.ajaxObject),!1):(this.options.onBeforeSend(),!0)}return!1}var d={init:function(e){return this.each(function(i,o){var c=t(o),d={ajaxObject:null,source:c.attr("action")||"/",method:c.attr("method")||"POST",ajax:!0,responseElement:t(this),onBeforeSend:function(){c.addClass(o.state.processing)},onSuccess:function(t){c.removeClass(o.state.processing),c.addClass(o.state.success);var e=o.options.success&&o.options.success(t);(e||void 0===e)&&o.options.responseElement.html(t)},onError:function(t,e,n){c.removeClass(o.state.processing),c.addClass(o.state.error);var s=o.options.error&&o.options.error(n,t.responseText);(s||void 0===s)&&o.options.responseElement.html(n)},success:function(t){},error:function(t,e){},prepare:function(t){return t},beforeSend:function(t,e){return!0}},u=t.extend({},d,e);o.options=u,c.submit(l),o.fields=a(o),o.state=e&&e.state?t.extend(n,e.state):n;var h=o;t.each(o.fields,function(e,n){t(n).keyup(function(e){t(n).removeClass("valid"),-1==s.indexOf(e.keyCode)&&h.options.validateOnEnter&&r.call(h,n)}),t(n).change(function(t){h.options.validateOnEnter&&r.call(h,n)})})})},loadData:function(e){this.fields=a(this),t.each(this.fields,function(n,s){e[s.name]&&t(s).val(e[s.name])})},validate:function(){c.call(this)}};t.fn.submitForm=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error('Method "'+e+'" not found!'):d.init.apply(this,arguments)}}($);