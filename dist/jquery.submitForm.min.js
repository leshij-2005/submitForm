!function(e){function t(i){return e(i.children).each(function(e,i){-1===jQuery.inArray(i.nodeName,a)||i.disabled||d.push(i),i.childElementCount&&t(i)}),d}function i(t){var i=e(t).attr("data-validate");if(e(t).removeClass("invalid"),e(t).removeClass("valid"),i){for(var n=i.split(", "),s=0;validator=n[s];s++){var a=l[validator];if(e(t).removeClass("invalid"),valid=a(t),!valid)return e(t).focus(),e(this).addClass("invalid-"+validator),!1}if(!valid)return void 0!==this.options.invalidHandler&&this.options.invalidHandler(item),!1}return e(t).addClass("valid"),!0}function n(){var n=this;d=[],this.fields=t(this),e.each(l,function(t,i){e(n).removeClass("invalid-"+t)});for(var s=!1,a=0;a<d.length;a++){var o=this.fields[a];if(!(s=i.call(n,o)))break}return s}function s(){if(e.each(o,function(t,i){e(this).removeClass(i)}),n.call(this)){var t={};return e(this.fields).each(function(i,n){var s,a=n.name||n.id;"radio"!==n.type&&"checkbox"!==n.type||!n.checked||(s=e(n).val()),(/text|hidden|password|tel/.test(n.type)||"SELECT"===n.nodeName||"TEXTAREA"===n.nodeName)&&(s=e(n).val()),void 0!==s&&(t[a]?("object"!=typeof t[a]&&(t[a]=[t[a]]),t[a].push(s)):t[a]=s)}),t=this.options.prepare(t),this.options.ajax?(this.options.ajaxObject?this.options.ajaxObject.data=t:this.options.ajaxObject={url:this.options.source,type:this.options.method,data:t,beforeSend:this.options.onBeforeSend,success:this.options.onSuccess,error:this.options.onError},this.options.beforeSend(t)&&e.ajax(this.options.ajaxObject),!1):(this.options.onBeforeSend(),!0)}return!1}var a=["INPUT","SELECT","TEXTAREA"],o={processing:"processing",error:"error",success:"success"},r=[37,39,8,46,13,10,36,35,9],d=[],l={required:function(t){var i="radio"===t.type||"checkbox"===t.type?t.checked:e(t).val().trim();return i||e(t).addClass("invalid"),!!i},phone:function(t){var i=e(t).val(),n=!0;return(!/^[0-9()\-+\s]+$/.test(i)||i.length<6)&&(e(t).addClass("invalid"),n=!1),n},email:function(t){var i=e(t).val(),n=!0;return i&&!/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(i)&&(e(t).addClass("invalid"),n=!1),n},date:function(t){var i=e(t).val(),n=!0;if(i){var s=i.split("."),a=new Date(s[2],s[1]-1,s[0],0,0,0,0);(n=!isNaN(a.getTime())&&parseInt(s[1])===a.getMonth()+1)||e(t).addClass("invalid")}return n}},c={init:function(n){return this.each(function(a,d){var l=e(d),c=(l.data("submitForm"),{ajaxObject:null,source:l.attr("action")||"/",method:l.attr("method")||"POST",ajax:!0,responseElement:e(this),onBeforeSend:function(e){l.addClass(o.processing)},onSuccess:function(e,t,i){l.removeClass(o.processing),l.addClass(o.success);var n=d.options.success&&d.options.success(e);(n||void 0===n)&&d.options.responseElement.html(e)},onError:function(e,t,i){l.removeClass(o.processing),l.addClass(o.error),(d.options.error?d.options.error(t,i):void 0)&&d.options.responseElement.html(i)},success:function(e){},prepare:function(e){return e},beforeSend:function(e){return!0}}),u=e.extend({},c,n);d.options=u,l.submit(s),d.fields=t(d);var v=d;e.each(d.fields,function(t,n){e(n).keyup(function(t){e(n).removeClass("valid"),-1==r.indexOf(t.keyCode)&&v.options.validateOnEnter&&i.call(v,n)}),e(n).change(function(e){v.options.validateOnEnter&&i.call(v,n)})})})},loadData:function(i){this.fields=t(this),e.each(this.fields,function(t,n){i[n.name]&&e(n).val(i[n.name])})},validate:function(){n.call(this)}};e.fn.submitForm=function(t){return c[t]?c[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Method "'+t+'" not found!'):c.init.apply(this,arguments)}}(jQuery);