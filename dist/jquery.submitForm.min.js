!function(t){function e(n){return t(n.children).each(function(n,i){-1===t.inArray(i.nodeName,s)||i.disabled||l.push(i),i.childElementCount&&e(i)}),l}function n(e){var n=t(e).attr("data-validate");if(t(e).removeClass("invalid"),t(e).removeClass("valid"),n){for(var i=n.split(", "),a=0;validator=i[a];a++){var s=d[validator];if(t(e).removeClass("invalid"),valid=s(e),!valid)return t(e).focus(),t(this).addClass("invalid-"+validator),!1}if(!valid)return void 0!==this.options.invalidHandler&&this.options.invalidHandler(item),!1}return t(e).addClass("valid"),!0}function i(){var i=this;l=[],this.fields=e(this),t.each(d,function(e,n){t(i).removeClass("invalid-"+e)});for(var a=!1,s=0;s<l.length;s++){var o=this.fields[s];if(!(a=n.call(i,o)))break}return a}function a(){if(t.each(this.state,function(e,n){t(this).removeClass(n)}),i.call(this)){var e={};return t(this.fields).each(function(n,i){var a,s=i.name||i.id;"radio"!==i.type&&"checkbox"!==i.type||!i.checked||(a=t(i).val()),(/text|hidden|password|tel/.test(i.type)||"SELECT"===i.nodeName||"TEXTAREA"===i.nodeName)&&(a=t(i).val()),void 0!==a&&(e[s]?("object"!=typeof e[s]&&(e[s]=[e[s]]),e[s].push(a)):e[s]=a)}),e=this.options.prepare(e),this.options.ajax?(this.options.ajaxObject?this.options.ajaxObject.data=e:this.options.ajaxObject={url:this.options.source,type:this.options.method,data:e,beforeSend:this.options.onBeforeSend,success:this.options.onSuccess,error:this.options.onError},this.options.beforeSend(e)&&t.ajax(this.options.ajaxObject),!1):(this.options.onBeforeSend(),!0)}return!1}var s=["INPUT","SELECT","TEXTAREA"],o={processing:"processing",error:"error",success:"success"},r=[37,39,8,46,13,10,36,35,9],l=[],d={required:function(e){var n="radio"===e.type||"checkbox"===e.type?e.checked:t(e).val().trim();return n||t(e).addClass("invalid"),!!n},phone:function(e){var n=t(e).val(),i=!0;return(!/^[0-9()\-+\s]+$/.test(n)||n.length<6)&&(t(e).addClass("invalid"),i=!1),i},email:function(e){var n=t(e).val(),i=!0;return n&&!/^([a-z0-9_\-]+\.)*[a-z0-9_\-]+@([a-z0-9][a-z0-9\-]*[a-z0-9]\.)+[a-z]{2,4}$/i.test(n)&&(t(e).addClass("invalid"),i=!1),i},date:function(e){var n=t(e).val(),i=!0;if(n){var a=n.split("."),s=new Date(a[2],a[1]-1,a[0],0,0,0,0);(i=!isNaN(s.getTime())&&parseInt(a[1])===s.getMonth()+1)||t(e).addClass("invalid")}return i},minlength:function(e){var n=t(e).attr("minlength"),i=!0;return t(e).val().length<n&&(i=!1,t(e).addClass("invalid")),i}},c={init:function(i){return this.each(function(s,l){var d=t(l),c={ajaxObject:null,source:d.attr("action")||"/",method:d.attr("method")||"POST",ajax:!0,responseElement:t(this),onBeforeSend:function(t){d.addClass(l.state.processing)},onSuccess:function(t,e,n){d.removeClass(l.state.processing),d.addClass(l.state.success);var i=l.options.success&&l.options.success(t);(i||void 0===i)&&l.options.responseElement.html(t)},onError:function(t,e,n){d.removeClass(l.state.processing),d.addClass(l.state.error),(l.options.error?l.options.error(e,n):void 0)&&l.options.responseElement.html(n)},success:function(t){},prepare:function(t){return t},beforeSend:function(t){return!0}},u=t.extend({},c,i);l.options=u,d.submit(a),l.fields=e(l),l.state=i&&i.state?t.extend(o,i.state):o;var v=l;t.each(l.fields,function(e,i){t(i).keyup(function(e){t(i).removeClass("valid"),-1==r.indexOf(e.keyCode)&&v.options.validateOnEnter&&n.call(v,i)}),t(i).change(function(t){v.options.validateOnEnter&&n.call(v,i)})})})},loadData:function(n){this.fields=e(this),t.each(this.fields,function(e,i){n[i.name]&&t(i).val(n[i.name])})},validate:function(){i.call(this)}};t.fn.submitForm=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error('Method "'+e+'" not found!'):c.init.apply(this,arguments)}}($);